# Example environment configuration for the Luna backend
# Copie este arquivo para .env (ou defina no Railway) e preencha os valores.

# -------------------- UAZAPI (WhatsApp) --------------------
# Base URL da sua instância Uazapi (sem barra final)
# Ex.: https://sua-instancia.uazapi.com
UAZAPI_BASE_URL=

# Token da INSTÂNCIA (não o admin token)
UAZAPI_TOKEN=

# Nome do header para autenticação:
#   token (padrão), apikey, authorization_bearer (=> Authorization: Bearer <token>)
UAZAPI_AUTH_HEADER_NAME=token

# Endpoints de envio
UAZAPI_SEND_TEXT_PATH=/send/text
UAZAPI_SEND_MEDIA_PATH=/send/media
UAZAPI_SEND_MENU_PATH=/send/menu

# --------- Texto/Botões do Menu (opcional) ----------
# Acionamento automático de menu para respostas positivas curtas
UAZAPI_AUTO_MENU_IF_POSITIVE=true
UAZAPI_MENU_TEXT="Sou a Luna... Posso te mostrar rapidamente um exemplo objetivo do que fazemos?"
# Separar por "|"
UAZAPI_MENU_CHOICES="Sim, pode continuar|Não, encerrar contato"
UAZAPI_MENU_FOOTER="Escolha uma das opções abaixo"
# Palavras/expressões que disparam o menu, separadas por "|"
UAZAPI_MENU_POSITIVE_WORDS="sim|ok|claro|pode|pode continuar|quero|sou eu"

# -------------------- WEBHOOK --------------------
# URL pública do seu backend (Railway → Deployments → Domains)
# Ex.: https://luna-agente-production.up.railway.app
PUBLIC_BASE_URL=

# Prefixo onde o webhook fica exposto (sem barra final).
# Produção: /luna-agente
WEBHOOK_PATH=/luna-agente

# Token de verificação: o Uazapi envia ?token=... ou header X-Webhook-Token
WEBHOOK_VERIFY_TOKEN=

# -------------------- Postgres --------------------
# Aceita: postgres://, postgresql://, postgresql+psycopg2://, postgresql+asyncpg://
DATABASE_URL=

# SSL no asyncpg:
#   disable            -> sem TLS (dev)
#   require            -> TLS com CA do sistema (default)
#   require_noverify   -> TLS sem verificação (use só se precisar)
#   verify-ca          -> informe DB_SSLROOTCERT
#   verify-full        -> informe DB_SSLROOTCERT
DB_SSLMODE=require
DB_SSLROOTCERT=

# -------------------- OpenAI --------------------
OPENAI_API_KEY=
ASSISTANT_ID=
# Opcional: modelo para fallback (Chat Completions)
OPENAI_MODEL=gpt-4o-mini
OPENAI_FALLBACK_SYSTEM="Você é a Luna, uma assistente útil e direta. Responda em português do Brasil."

# -------------------- Baserow (opcional) --------------------
BASEROW_BASE_URL=
BASEROW_API_TOKEN=
